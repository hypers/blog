<!DOCTYPE html><html class="theme-next muse use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css"><meta name="keywords" content="ECMAScript 2016,ECMAScript 2017,ECMAScript 2018,"><link rel="shortcut icon" type="image/x-icon" href="/favicon.png?v=5.1.1"><meta name="description" content="ä»¥ä¸‹æ˜¯ ECMAScript 2016, 2017, å’Œ 2018 ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹åŸæ–‡é“¾æ¥ è¦è·Ÿä¸Š JavaScript(ECMAScript) æ›´æ–°çš„è„šæ­¥å¾ˆéš¾ï¼Œæ›´éš¾çš„æ˜¯æ‰¾åˆ°æœ‰ç”¨çš„ä»£ç ç¤ºä¾‹ã€‚ å› æ­¤ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»åœ¨ ES2016ï¼ŒES2017 å’Œ ES2018ï¼ˆæœ€ç»ˆè‰æ¡ˆï¼‰ä¸­æ·»åŠ çš„TC39å·²å®Œæˆææ¡ˆä¸­åˆ—å‡ºçš„æ‰€æœ‰ 18 ä¸ªæ–°ç‰¹æ€§ï¼Œå¹¶ä¸€ä¸€å±•ç¤ºæœ‰ç”¨çš„ç¤ºä¾‹ã€‚  è¿™ç¯‡æ–‡ç« å¾ˆé•¿ï¼Œä¸è¿‡åº”è¯¥å¾ˆå®¹æ˜“è¯»ï¼Œå¯ä»¥å½“æˆ"><meta name="keywords" content="ECMAScript 2016,ECMAScript 2017,ECMAScript 2018"><meta property="og:type" content="article"><meta property="og:title" content="ECMAScript 2016, 2017, å’Œ2018ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹"><meta property="og:url" content="http://blog.rsuitejs.com/2018/04/11/es2016-17-18/index.html"><meta property="og:site_name" content="HYPERS å‰ç«¯å›¢é˜Ÿåšå®¢"><meta property="og:description" content="ä»¥ä¸‹æ˜¯ ECMAScript 2016, 2017, å’Œ 2018 ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹åŸæ–‡é“¾æ¥ è¦è·Ÿä¸Š JavaScript(ECMAScript) æ›´æ–°çš„è„šæ­¥å¾ˆéš¾ï¼Œæ›´éš¾çš„æ˜¯æ‰¾åˆ°æœ‰ç”¨çš„ä»£ç ç¤ºä¾‹ã€‚ å› æ­¤ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»åœ¨ ES2016ï¼ŒES2017 å’Œ ES2018ï¼ˆæœ€ç»ˆè‰æ¡ˆï¼‰ä¸­æ·»åŠ çš„TC39å·²å®Œæˆææ¡ˆä¸­åˆ—å‡ºçš„æ‰€æœ‰ 18 ä¸ªæ–°ç‰¹æ€§ï¼Œå¹¶ä¸€ä¸€å±•ç¤ºæœ‰ç”¨çš„ç¤ºä¾‹ã€‚  è¿™ç¯‡æ–‡ç« å¾ˆé•¿ï¼Œä¸è¿‡åº”è¯¥å¾ˆå®¹æ˜“è¯»ï¼Œå¯ä»¥å½“æˆ"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2019-02-14T04:30:39.232Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ECMAScript 2016, 2017, å’Œ2018ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹"><meta name="twitter:description" content="ä»¥ä¸‹æ˜¯ ECMAScript 2016, 2017, å’Œ 2018 ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹åŸæ–‡é“¾æ¥ è¦è·Ÿä¸Š JavaScript(ECMAScript) æ›´æ–°çš„è„šæ­¥å¾ˆéš¾ï¼Œæ›´éš¾çš„æ˜¯æ‰¾åˆ°æœ‰ç”¨çš„ä»£ç ç¤ºä¾‹ã€‚ å› æ­¤ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»åœ¨ ES2016ï¼ŒES2017 å’Œ ES2018ï¼ˆæœ€ç»ˆè‰æ¡ˆï¼‰ä¸­æ·»åŠ çš„TC39å·²å®Œæˆææ¡ˆä¸­åˆ—å‡ºçš„æ‰€æœ‰ 18 ä¸ªæ–°ç‰¹æ€§ï¼Œå¹¶ä¸€ä¸€å±•ç¤ºæœ‰ç”¨çš„ç¤ºä¾‹ã€‚  è¿™ç¯‡æ–‡ç« å¾ˆé•¿ï¼Œä¸è¿‡åº”è¯¥å¾ˆå®¹æ˜“è¯»ï¼Œå¯ä»¥å½“æˆ"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",sidebar:{position:"left",display:"post",offset:12,offset_float:0,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,motion:!0,duoshuo:{userId:"0",author:"åšä¸»"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://blog.rsuitejs.com/2018/04/11/es2016-17-18/"><title>ECMAScript 2016, 2017, å’Œ2018ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹ | HYPERS å‰ç«¯å›¢é˜Ÿåšå®¢</title><script>!function(e,t,n,c,a,r,s,h){e[n]=e[n]||[],e[n].push(r),e[r]=e[r]||function(){return(e[r].q=e[r].q||[]).push(arguments)},(s=t.createElement(c)).src="//t.hypers.com.cn/hwt.js?v=1.6",s.async=1,(h=t.getElementsByTagName(c)[0]).parentNode.insertBefore(s,h)}(window,document,"HyperAnalyticsObject","script",0,"_ha"),_ha("create","4080"),_ha("send","pageview")</script></head><body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">HYPERS å‰ç«¯å›¢é˜Ÿåšå®¢</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> é¦–é¡µ</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> å½’æ¡£</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> æ ‡ç­¾</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://blog.rsuitejs.com/2018/04/11/es2016-17-18/"><span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hypers"><meta itemprop="description" content=""><meta itemprop="image" content="/images/hypers_logo.png"></span><span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="HYPERS å‰ç«¯å›¢é˜Ÿåšå®¢"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">ECMAScript 2016, 2017, å’Œ2018ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-04-11T00:00:00+00:00">2018-04-11</time></span><div class="post-wordcount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡</span> <span title="å­—æ•°ç»Ÿè®¡">6,651</span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="ä»¥ä¸‹æ˜¯-ECMAScript-2016-2017-å’Œ-2018-ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹"><a href="#ä»¥ä¸‹æ˜¯-ECMAScript-2016-2017-å’Œ-2018-ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹" class="headerlink" title="ä»¥ä¸‹æ˜¯ ECMAScript 2016, 2017, å’Œ 2018 ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹"></a>ä»¥ä¸‹æ˜¯ ECMAScript 2016, 2017, å’Œ 2018 ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹</h1><p><a href="https://medium.freecodecamp.org/here-are-examples-of-everything-new-in-ecmascript-2016-2017-and-2018-d52fa3b5a70e" target="_blank" rel="noopener">åŸæ–‡é“¾æ¥</a></p><p>è¦è·Ÿä¸Š JavaScript(ECMAScript) æ›´æ–°çš„è„šæ­¥å¾ˆéš¾ï¼Œæ›´éš¾çš„æ˜¯æ‰¾åˆ°æœ‰ç”¨çš„ä»£ç ç¤ºä¾‹ã€‚</p><p>å› æ­¤ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»åœ¨ ES2016ï¼ŒES2017 å’Œ ES2018ï¼ˆæœ€ç»ˆè‰æ¡ˆï¼‰ä¸­æ·»åŠ çš„TC39å·²å®Œæˆææ¡ˆä¸­åˆ—å‡ºçš„æ‰€æœ‰ 18 ä¸ªæ–°ç‰¹æ€§ï¼Œå¹¶ä¸€ä¸€å±•ç¤ºæœ‰ç”¨çš„ç¤ºä¾‹ã€‚</p><blockquote><p>è¿™ç¯‡æ–‡ç« å¾ˆé•¿ï¼Œä¸è¿‡åº”è¯¥å¾ˆå®¹æ˜“è¯»ï¼Œå¯ä»¥å½“æˆä¸€ç¯‡â€œNetflix binge readingâ€ã€‚æˆ‘ä¿è¯ä½ è¯»å®Œåå°†å¯¹è¿™äº›æ–°ç‰¹æ€§æœ‰å¾ˆå¤šçš„äº†è§£ã€‚</p></blockquote><p><strong>å¥½ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥çœ‹çœ‹ã€‚</strong></p><a id="more"></a><h2 id="ECMAScript-2016"><a href="#ECMAScript-2016" class="headerlink" title="ECMAScript 2016"></a>ECMAScript 2016</h2><ul><li><h3 id="1-Array-prototype-includes"><a href="#1-Array-prototype-includes" class="headerlink" title="1. Array.prototype.includes"></a>1. Array.prototype.includes</h3></li></ul><p><code>includes</code> æ˜¯ Array çš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œç”¨æ¥è½»æ¾æŸ¥æ‰¾æŸä¸ªé¡¹æ˜¯å¦åœ¨ Array ä¸­ï¼ˆåŒ…æ‹¬ <code>NaN</code>ï¼Œè¿™ç‚¹ <code>indexOf</code> åšä¸åˆ°ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="literal">NaN</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// es2016ä¸ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">if</span>(arr.indexOf(<span class="number">3</span>) &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">if</span>(arr.includes(<span class="number">3</span>))&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ps: æ³¨æ„ indexOf æ˜¯ä¸æ”¯æŒæŸ¥æ‰¾NaNçš„</span></span><br><span class="line">arr.includes(<span class="literal">NaN</span>) <span class="comment">// true</span></span><br><span class="line">arr.indexOf(<span class="literal">NaN</span>) <span class="comment">// -1 (indexOf ä¸æ”¯æŒ NaN)</span></span><br></pre></td></tr></table></figure><blockquote><p>å†·çŸ¥è¯†ï¼šJavaScript è§„èŒƒåˆ¶å®šè€…æœ¬æƒ³ç»™å®ƒå–åå« <code>contains</code>ï¼Œä½†è¿™æ˜¾ç„¶å·²è¢« Mootools ä½¿ç”¨ï¼Œå› æ­¤ä»–ä»¬ä½¿ç”¨äº† <code>includes</code>ã€‚</p></blockquote><ul><li><h3 id="2-å¹‚è¿ç®—ç¬¦"><a href="#2-å¹‚è¿ç®—ç¬¦" class="headerlink" title="2. å¹‚è¿ç®—ç¬¦"></a>2. å¹‚è¿ç®—ç¬¦</h3></li></ul><p>æ•°å­¦è¿ç®—å¦‚åŠ æ³•å’Œå‡æ³•åˆ†åˆ«æœ‰ <code>+</code> å’Œ <code>-</code> ç­‰è¿ç®—ç¬¦ã€‚ä¸ä»–ä»¬ç±»ä¼¼ï¼Œ<code>**</code> è¿ç®—ç¬¦é€šå¸¸ç”¨äºå¹‚è¿ç®—ã€‚åœ¨ ECMAScript 2016 ä¸­å¼•å…¥äº† <code>**</code>ï¼Œå–ä»£ <code>Math.pow</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ä½¿ç”¨</span></span><br><span class="line"><span class="built_in">Math</span>.pow(<span class="number">7</span>,<span class="number">2</span>) <span class="comment">//49</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="number">7</span>**<span class="number">2</span> <span class="comment">//49</span></span><br></pre></td></tr></table></figure><h2 id="ECMAScript-2017"><a href="#ECMAScript-2017" class="headerlink" title="ECMAScript 2017"></a>ECMAScript 2017</h2><ul><li><h3 id="1-Object-values"><a href="#1-Object-values" class="headerlink" title="1. Object.values()"></a>1. Object.values()</h3></li></ul><p><code>Object.value()</code> æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå®ƒä¸ <code>Object.keys()</code> ç±»ä¼¼ï¼Œä½†è¿”å›çš„äº‹ Object æ‰€æœ‰å±æ€§çš„å€¼ï¼ˆä¸åŒ…æ‹¬æ¥è‡ªåŸå‹é“¾çš„å±æ€§ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cars = &#123; <span class="string">'BMW'</span>: <span class="number">3</span>, <span class="string">'Tesla'</span>: <span class="number">2</span>, <span class="string">'Toyota'</span>: <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES2015</span></span><br><span class="line"><span class="comment">// ES2017 ä¸ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> vals = <span class="built_in">Object</span>.keys(cars).map(<span class="function"><span class="params">key</span> =&gt;</span> cars[key]);</span><br><span class="line"><span class="built_in">console</span>.log(vals); <span class="comment">//[3, 2, 1]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES2017 and æœªæ¥</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> values = <span class="built_in">Object</span>.values(cars);</span><br><span class="line"><span class="built_in">console</span>.log(values); <span class="comment">// [3, 2, 1]</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="2-Object-entries"><a href="#2-Object-entries" class="headerlink" title="2. Object.entries()"></a>2. Object.entries()</h3></li></ul><p><code>Object.entries()</code> ä¸ <code>Object.keys</code> ç›¸å…³ï¼Œä½†ä¸æ˜¯ä»…è¿”å› keysï¼Œè€Œæ˜¯ä»¥æ•°ç»„æ–¹å¼è¿”å› keys å’Œ valuesã€‚è¿™è®©ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°éå†å¯¹è±¡ï¼Œæˆ–è€…æŠŠå¯¹è±¡è½¬æ¢ä¸º Mapsã€‚</p><p>ä¾‹ 1:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cars = &#123; <span class="string">'BMW'</span>: <span class="number">3</span>, <span class="string">'Tesla'</span>: <span class="number">2</span>, <span class="string">'Toyota'</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="comment">// ES5.1</span></span><br><span class="line"><span class="comment">// è€Œä¸æ˜¯æå–é”®ç„¶åå†å¾ªç¯</span></span><br><span class="line"><span class="built_in">Object</span>.keys(cars).forEarch(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'key: '</span> + key + <span class="string">'value: '</span> + cars[key]);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES2017 (ES8)</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ Object.entries</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [key value] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(cars)) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`key: <span class="subst">$&#123;key&#125;</span> value: <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹ 2:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cars = &#123; <span class="string">'BMW'</span>: <span class="number">3</span>, <span class="string">'Tesla'</span>: <span class="number">2</span>, <span class="string">'Toyota'</span>: <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES2015</span></span><br><span class="line"><span class="comment">// ä¸ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// è·å–å¯¹è±¡é”®ï¼Œç„¶åæ·»åŠ æ¯ä¸ªé¡¹ç›®ä»¥åœ¨å¾ªç¯ä¸­æ˜ å°„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> maps = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="built_in">Object</span>.keys(cars).forEarch(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">	map1.set(key, cars[key]);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map1) <span class="comment">// Map &#123; 'BMW' =&gt; 3, 'Tesla' =&gt; 2, 'Toyota' =&gt; 1&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES2017 and ä»¥å</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(cars));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(map) <span class="comment">//Map &#123; 'BMW' =&gt; 3, 'Tesla' =&gt; 2, 'Toyota' =&gt; 1&#125;</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="3-å­—ç¬¦ä¸²å¡«å……"><a href="#3-å­—ç¬¦ä¸²å¡«å……" class="headerlink" title="3. å­—ç¬¦ä¸²å¡«å……"></a>3. å­—ç¬¦ä¸²å¡«å……</h3></li></ul><p>String å¢åŠ äº†ä¸¤ä¸ªå®ä¾‹æ–¹æ³• â€“ <code>String.prototype.padStart</code> å’Œ <code>String.prototype.padEnd</code>ï¼Œç”¨äºåœ¨åŸå­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾æ·»åŠ ä¸€æ®µå­—ç¬¦ä¸²æˆ–ç©ºå­—ç¬¦ä¸²ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&apos;someString&apos;.padStart(numberOfCharcters [,stringForPadding]);</span><br><span class="line">&apos;5&apos;.padStart(10) // &apos;          5&apos;</span><br><span class="line">&apos;5&apos;.padStart(10, &apos;=*&apos;) //&apos;=*=*=*=*=5&apos;</span><br><span class="line">&apos;5&apos;.padEnd(10) // &apos;5         &apos;</span><br><span class="line">&apos;5&apos;.padEnd(10, &apos;=*&apos;) //&apos;5=*=*=*=*=&apos;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™åœ¨éœ€è¦å¯¹é½äº‹ç‰©çš„åœºæ™¯ä¸‹å¾ˆæ–¹ä¾¿ï¼Œè¯¸å¦‚æ¼‚äº®çš„æ‰“å°æ˜¾ç¤ºæˆ–ç»ˆç«¯æ‰“å°ã€‚</p></blockquote><ul><li><h4 id="3-1-padStart-ä¾‹å­"><a href="#3-1-padStart-ä¾‹å­" class="headerlink" title="3.1 padStart ä¾‹å­"></a>3.1 padStart ä¾‹å­</h4></li></ul><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ç»„é•¿åº¦ä¸åŒçš„æ•°å­—ã€‚ä¸ºäº†æ˜¾ç¤ºå¥½çœ‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å®ƒä»¬å‰é¢è¡¥â€œ0â€ï¼Œè®©å®ƒä»¬é•¿åº¦éƒ½è¾¾åˆ° 10ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>padStart(10, &#39;0&#39;)</code> è½»æ¾å®ç°è¿™ä¸€ç‚¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES2017</span></span><br><span class="line"><span class="comment">// å¦‚æœä½ æœ‰ä¸€ä¸ªä¸åŒé•¿åº¦çš„é¡¹ç›®åˆ—è¡¨ï¼Œå¹¶å¸Œæœ›æ ¼å¼åŒ–å®ƒä»¬çš„æ˜¾ç¤ºç›®çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨padStart</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> formatted = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">12</span>, <span class="number">123</span>, <span class="number">1234</span>, <span class="number">12345</span>].map(<span class="function"><span class="params">num</span> =&gt;</span></span><br><span class="line">	num.toString().padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// æ·»åŠ  0 ç›´åˆ°é•¿åº¦ä¸º 10</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(formatted);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°</span></span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">// 	'0000000000',</span></span><br><span class="line"><span class="comment">// 	'0000000001',</span></span><br><span class="line"><span class="comment">// 	'0000000012',</span></span><br><span class="line"><span class="comment">// 	'0000000123',</span></span><br><span class="line"><span class="comment">// 	'0000001234',</span></span><br><span class="line"><span class="comment">// 	'0000012345',</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><ul><li><h4 id="3-2-padEnd-ä¾‹å­"><a href="#3-2-padEnd-ä¾‹å­" class="headerlink" title="3.2 padEnd ä¾‹å­:"></a>3.2 padEnd ä¾‹å­:</h4></li></ul><p>æˆ‘ä»¬æ‰“å°å¤šä¸ªä¸åŒé•¿åº¦çš„é¡¹ç›®å¹¶æƒ³è¦å³å¯¹é½å®ƒä»¬æ—¶ï¼Œ<code>padEnd</code> çœŸçš„å¾ˆæ–¹ä¾¿ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­å¾ˆå¥½åœ°å±•ç¤ºäº†å¦‚ä½•è¿ç”¨ <code>padEnd</code>ï¼Œ<code>padStart</code> å’Œ <code>Object.entries</code> äº§ç”Ÿæ¼‚äº®çš„è¾“å‡ºã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cars = &#123;</span><br><span class="line">  <span class="string">'ğŸš™BMW'</span>: <span class="string">'10'</span>,</span><br><span class="line">  <span class="string">'ğŸš˜Tesla'</span>: <span class="string">'5'</span>,</span><br><span class="line">  <span class="string">'ğŸš–Lamborghini'</span>: <span class="string">'0'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.entries(cars).map(<span class="function">(<span class="params">[name, count]</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//padEnd appends ' -' until the name becomes 20 characters</span></span><br><span class="line">  <span class="comment">//padStart prepends '0' until the count becomes 3 characters.</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;name.padEnd(<span class="number">20</span>, <span class="string">' -'</span>)&#125;</span> Count: <span class="subst">$&#123;count.padStart(<span class="number">3</span>, <span class="string">'0'</span>)&#125;</span>`</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœ..</span></span><br><span class="line"><span class="comment">// ğŸš™BMW - - - - - - -  Count: 010</span></span><br><span class="line"><span class="comment">// ğŸš˜Tesla - - - - - -  Count: 005</span></span><br><span class="line"><span class="comment">// ğŸš–Lamborghini - - -  Count: 000</span></span><br></pre></td></tr></table></figure><ul><li><h4 id="3-3-âš ï¸-Emoji-å’Œå…¶ä»–åŒå­—èŠ‚å­—ç¬¦ä¸Šçš„-padStart-å’Œ-padEnd"><a href="#3-3-âš ï¸-Emoji-å’Œå…¶ä»–åŒå­—èŠ‚å­—ç¬¦ä¸Šçš„-padStart-å’Œ-padEnd" class="headerlink" title="3.3 âš ï¸ Emoji å’Œå…¶ä»–åŒå­—èŠ‚å­—ç¬¦ä¸Šçš„ padStart å’Œ padEnd"></a>3.3 âš ï¸ Emoji å’Œå…¶ä»–åŒå­—èŠ‚å­—ç¬¦ä¸Šçš„ padStart å’Œ padEnd</h4></li></ul><p>Emoji å’Œå…¶ä»–åŒå­—èŠ‚å­—ç¬¦ä½¿ç”¨å¤šä¸ª unicode å­—èŠ‚è¡¨ç¤ºã€‚æ‰€ä»¥ <code>padStart</code> å’Œ <code>padEnd</code> å¯èƒ½æ— æ³•æŒ‰é¢„æœŸå·¥ä½œï¼âš ï¸</p><p>ä¾‹å¦‚ï¼šå‡è®¾æˆ‘ä»¬æ­£åœ¨å°è¯•ç”¨ â¤ ï¸è¡¨æƒ…ç¬¦å·å¡«å……å­—ç¬¦ä¸² <code>heart</code> ä»¥è¾¾åˆ°10ä¸ªå­—ç¬¦ã€‚ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„ï¼Œä¸æ˜¯5é¢—å¿ƒï¼Œåªæœ‰2é¢—å¿ƒå’Œ1é¢—çœ‹èµ·æ¥å¾ˆå¥‡æ€ªçš„å¿ƒï¼</span></span><br><span class="line"></span><br><span class="line"><span class="string">'heart'</span>.padStart(<span class="number">10</span>, <span class="string">"â¤ï¸"</span>); <span class="comment">// prints.. 'â¤ï¸â¤ï¸â¤heart'</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸º â¤ ï¸é•¿ 2 ä¸ªå­—ç¬¦(<code>&#39;\u2764\uFE0F&#39;</code>)ï¼å•è¯ heart æœ¬èº«æ˜¯ 5 ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬è¦å¡«å……å‰©ä¸‹çš„ 5 ä¸ªå­—ç¬¦ã€‚æ‰€ä»¥ JS å…ˆå¡«å……äº†ä¸¤ä¸ª <code>&#39;\u2764\uFE0F&#39;</code> ï¼ˆä¹Ÿå°±æ˜¯ â¤ï¸â¤ï¸ï¸ï¼‰ ï¸ï¼Œæœ€åå‰©ä¸‹ä¸€ä¸ªå­—èŠ‚å¡«å……äº† <code>\ u2764</code>ï¼Œè€Œå®ƒå¯¹åº”çš„æ˜¯å°å¿ƒå½¢ â¤ã€‚</p><p>æ‰€ä»¥ç»“æœæ˜¯: <code>â¤ï¸â¤ï¸â¤heart</code></p><blockquote><p>PSï¼šæ‚¨å¯ä»¥ä½¿ç”¨<a href="https://encoder.internetwache.org/#tab_uni" target="_blank" rel="noopener">æ­¤é“¾æ¥</a> æŸ¥çœ‹ unicode å­—ç¬¦è½¬æ¢</p></blockquote><ul><li><h3 id="4-Object-getOwnPropertyDescriptors"><a href="#4-Object-getOwnPropertyDescriptors" class="headerlink" title="4. Object.getOwnPropertyDescriptors"></a>4. Object.getOwnPropertyDescriptors</h3></li></ul><p>æ­¤æ–¹æ³•è¿”å›ç»™å®šå¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„æ‰€æœ‰è¯¦ç»†ä¿¡æ¯(åŒ…æ‹¬ <code>get</code> <code>set</code> æ–¹æ³•)ã€‚ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†åœ¨æµ…æ‹·è´/å…‹éš†ä¸€ä¸ªå¯¹è±¡åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­æ—¶ï¼Œèƒ½æŠŠ getter å’Œ setter ä¹Ÿå¤åˆ¶è¿‡å»ï¼Œå› ä¸º <code>Object.assign</code> æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p><strong>Object.assign æµ…å…‹éš†é™¤åŸå§‹æºå¯¹è±¡çš„ getter å’Œ setter å‡½æ•°ä»¥å¤–çš„æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ã€‚</strong></p><p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†åˆ†åˆ«ä½¿ç”¨ <code>Object.assign</code> å’Œ <code>Object.getOwnPropertyDescriptors</code>ï¼ˆé…åˆ <code>Object.defineProperties</code>ï¼‰ ä»¥å°†åŸå§‹å¯¹è±¡ <code>Car</code> å¤åˆ¶åˆ°æ–°å¯¹è±¡ <code>ElectricCar</code> æ—¶çš„åŒºåˆ«ã€‚ä½ ä¼šå‘ç°ä½¿ç”¨ <code>Object.getOwnPropertyDescriptors</code> ä¼šå°† <code>discount</code> çš„ getter å’Œ setter ä¹Ÿè¢«å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ã€‚</p><h6 id="ä¹‹å‰â€¦"><a href="#ä¹‹å‰â€¦" class="headerlink" title="ä¹‹å‰â€¦"></a>ä¹‹å‰â€¦</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¹‹å‰...</span></span><br><span class="line"><span class="keyword">var</span> Car = &#123;</span><br><span class="line">	name: <span class="string">'BMW'</span>,</span><br><span class="line">	price: <span class="number">1000000</span>,</span><br><span class="line">	<span class="keyword">set</span> discount(x) &#123;</span><br><span class="line">		<span class="keyword">this</span>.d = x;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="keyword">get</span> discount() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.d;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°Carå¯¹è±¡çš„â€œdiscountâ€å±æ€§çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptor(Car, <span class="string">'discount'</span>));</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœ..</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">// 	get: [Function: get],</span></span><br><span class="line"><span class="comment">// 	set: [Function: set],</span></span><br><span class="line"><span class="comment">// 	enumerable: true,</span></span><br><span class="line"><span class="comment">// 	configurable: true</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨Object.assignå°†Carçš„å±æ€§å¤åˆ¶åˆ°ElectricCar</span></span><br><span class="line"><span class="keyword">const</span> ElectricCar = <span class="built_in">Object</span>.assign(&#123;&#125;, Car)ï¼›</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“å°ElectricCarå¯¹è±¡çš„â€œdiscountâ€å±æ€§çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptor(ElectricCar, <span class="string">'discount'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">// 	value: undefined,</span></span><br><span class="line"><span class="comment">// 	writable: true,</span></span><br><span class="line"><span class="comment">// 	enumerable: true,</span></span><br><span class="line"><span class="comment">// 	configurable: true</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// âš ï¸ è¯·æ³¨æ„ElectricCarå¯¹è±¡ä¸­çš„â€œdiscountâ€å±æ€§ä¸­ç¼ºå°‘getterå’Œsetterï¼ğŸ‘ğŸ‘</span></span><br></pre></td></tr></table></figure><h6 id="ä»¥åâ€¦"><a href="#ä»¥åâ€¦" class="headerlink" title="ä»¥åâ€¦"></a>ä»¥åâ€¦</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥å...</span></span><br><span class="line"><span class="keyword">var</span> Car = &#123;</span><br><span class="line">	name: <span class="string">'BMW'</span>,</span><br><span class="line">	price: <span class="number">1000000</span>,</span><br><span class="line">	<span class="keyword">set</span> discount(x) &#123;</span><br><span class="line">		<span class="keyword">this</span>.d = x;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="keyword">get</span> discount() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.d;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä½¿ç”¨Object.definePropertieså°†Carçš„å±æ€§å¤åˆ¶åˆ°ElectricCar2</span></span><br><span class="line"><span class="comment">// å¹¶ä½¿ç”¨Object.getOwnPropertyDescriptorsæå–Carçš„å±æ€§</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ElectricCar2 = <span class="built_in">Object</span>.defineProperties(&#123;&#125;, <span class="built_in">Object</span>.getOwnPropertyDescriptors(Car));</span><br><span class="line"><span class="comment">// æ‰“å°ElectricCar2å¯¹è±¡â€œdiscountâ€å±æ€§çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptor(ElectricCar2, <span class="string">'discount'</span>));</span><br><span class="line"><span class="comment">// prints..</span></span><br><span class="line"><span class="comment">// &#123; get: [Function: get],  ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼</span></span><br><span class="line"><span class="comment">//   set: [Function: set],  ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼ğŸ‘ˆğŸ¼</span></span><br><span class="line"><span class="comment">//   enumerable: true,</span></span><br><span class="line"><span class="comment">//   configurable: true</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// è¯·æ³¨æ„ï¼Œgetterå’Œsetterå­˜åœ¨äºElectricCar2å¯¹è±¡ä¸­ï¼Œç”¨äº'discount'å±æ€§ï¼</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="5-åœ¨å‡½æ•°å‚æ•°ä¸­æ·»åŠ å°¾åé€—å·-trailing-commas"><a href="#5-åœ¨å‡½æ•°å‚æ•°ä¸­æ·»åŠ å°¾åé€—å·-trailing-commas" class="headerlink" title="5. åœ¨å‡½æ•°å‚æ•°ä¸­æ·»åŠ å°¾åé€—å·(trailing commas)"></a>5. åœ¨å‡½æ•°å‚æ•°ä¸­æ·»åŠ å°¾åé€—å·(trailing commas)</h3></li></ul><p>è¿™æ˜¯ä¸€ä¸ªå°çš„æ›´æ–°ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨æœ€åä¸€ä¸ªå‡½æ•°å‚æ•°åé¢åŠ ä¸Šå°¾éšé€—å·ã€‚æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ å½“ä½ ä½¿ç”¨ git blame æ—¶ï¼Œè¿™èƒ½ç¡®ä¿åªæœ‰æ–°å¢çš„å‚æ•°è¢«æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é—®é¢˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	#1 å¼€å‘è€…åˆ›å»º</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">	name,</span></span></span><br><span class="line"><span class="function"><span class="params">	age</span></span></span><br><span class="line"><span class="function"><span class="params">	</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// #2 å¼€å‘è€…æ·»åŠ address</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">	name,</span></span></span><br><span class="line"><span class="function"><span class="params">	age, <span class="regexp">//</span> æ·»åŠ å°¾éšé€—å· 	&lt;--------å› ä¸ºé€—å·ï¼Œå¼€å‘äººå‘˜ä¼šè¢«gitç­‰å·¥å…·æ‰€è­¦å‘Š</span></span></span><br><span class="line"><span class="function"><span class="params">	address <span class="regexp">//</span>æ·»åŠ æ–°çš„å‚æ•°</span></span></span><br><span class="line"><span class="function"><span class="params">  </span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.address = address; <span class="comment">//æ·»åŠ çš„è¿™è¡Œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES2017 è§£å†³</span></span><br><span class="line"><span class="comment">// å…è®¸#1å¼€å‘è€…æ·»åŠ å°¾éšé€—å·</span></span><br><span class="line"><span class="comment">// #1 åˆ›å»ºå¦‚ä¸‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">	name,</span></span></span><br><span class="line"><span class="function"><span class="params">	ange,  <span class="regexp">//</span>&lt;------- ç”±äºå°¾éšé€—å·ï¼Œ#<span class="number">2</span>å¼€å‘è€…ä¸éœ€è¦æ”¹å˜è¿™è¡Œ</span></span></span><br><span class="line"><span class="function"><span class="params">	</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šæ‚¨ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨å°¾åé€—å·ï¼</p></blockquote><ul><li><h3 id="6-Async-Await"><a href="#6-Async-Await" class="headerlink" title="6. Async/Await"></a>6. Async/Await</h3></li></ul><p>è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨æˆ‘çœ‹æ¥æ˜¯è¿„ä»Šä¸ºæ­¢æœ€é‡è¦ä¹Ÿæ˜¯æœ€æœ‰ç”¨çš„ç‰¹æ€§ã€‚å¼‚æ­¥å‡½æ•°æŠŠæˆ‘ä»¬ä»å›è°ƒåœ°ç‹±ä¸­è§£æ”¾å‡ºæ¥ï¼Œå¹¶ä½¿æ•´ä¸ªä»£ç çœ‹èµ·æ¥å¾ˆç®€æ´ã€‚</p><p><code>async</code> å…³é”®å­—å‘Šè¯‰ JavaScript ç¼–è¯‘å™¨ä»¥ä¸åŒçš„æ–¹å¼å¤„ç†å‡½æ•°ï¼Œç¼–è¯‘å™¨åœ¨è¯¥å‡½æ•°å†…åˆ°è¾¾ <code>await</code> å…³é”®å­—æ—¶æš‚åœã€‚å®ƒå‡è®¾ <code>await</code> ä¹‹åçš„è¡¨è¾¾å¼è¿”å›ä¸€ä¸ª Promiseï¼Œå¹¶ç­‰åˆ° Promise è¢« resolve æˆ– reject åæ‰ç»§ç»­å‰è¿›ã€‚</p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<code>getAmount</code> å‡½æ•°è°ƒç”¨ä¸¤ä¸ªå¼‚æ­¥å‡½æ•° <code>getUser</code> å’Œ <code>getBankBalance</code>ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ Promise åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†ä½¿ç”¨ <code>async await</code> æ›´ä¼˜é›…å’Œç®€æ´ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// ES2015 Promise</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAmount</span>(<span class="params">userId</span>) </span>&#123;</span><br><span class="line">	getUser(userId)</span><br><span class="line">		.then(getBankBalance)</span><br><span class="line">		.then(<span class="function"><span class="params">amount</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(amount);</span><br><span class="line">		&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨...</span></span><br><span class="line"><span class="comment">// ES2017</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getAmount2</span>(<span class="params">userId</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> user = <span class="keyword">await</span> getUser(userId);</span><br><span class="line">	<span class="keyword">var</span> amount = <span class="keyword">await</span> getBankBalance(user);</span><br><span class="line">	<span class="built_in">console</span>.log(amount);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getAmount(<span class="string">'1'</span>); <span class="comment">//$1,000</span></span><br><span class="line"></span><br><span class="line">getAmount2(<span class="string">'1'</span>); <span class="comment">//$1,000</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUser</span>(<span class="params">userId</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">			resolve(<span class="string">'john'</span>)</span><br><span class="line">		&#125;, <span class="number">1000</span>)</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBankBalance</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(user == <span class="string">'john'</span>) &#123;</span><br><span class="line">				resolve(<span class="string">'$1,000'</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				reject(unknown user);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, <span class="number">1000</span>)</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h4 id="6-1-å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ª-Promise"><a href="#6-1-å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ª-Promise" class="headerlink" title="6.1 å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ª Promise"></a>6.1 å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ª Promise</h4></li></ul><p>å¦‚æœæ‚¨è¦ç­‰å¾…å¼‚æ­¥å‡½æ•°çš„ç»“æœï¼Œåˆ™éœ€è¦ä½¿ç”¨ Promise çš„ <code>then</code> è¯­æ³•æ¥æ•è·å®ƒã€‚</p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³ä½¿ç”¨ <code>console.log</code> åœ¨ doubleAndAdd çš„å¤–éƒ¨æ‰“å°å‡ºå®ƒçš„ç»“æœã€‚æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ <code>then</code> æ¥ç­‰å¾…å¹¶è·å–å®ƒçš„ç»“æœä¼ é€’ç»™ <code>console.log</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ªPromise</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">doubleAndAdd</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	a = <span class="keyword">await</span> doubleAfterlSec(a);</span><br><span class="line">	b = <span class="keyword">await</span> doubleAfterlSec(b);</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line">doubleAndAdd(<span class="number">1</span>, <span class="number">2</span>).then(<span class="built_in">console</span>.log);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleAfterlSec</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span> (<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">		setTimeout(resolve(param * <span class="number">2</span>), <span class="number">1000</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h4 id="6-2-å¹¶è¡Œè°ƒç”¨-async-await"><a href="#6-2-å¹¶è¡Œè°ƒç”¨-async-await" class="headerlink" title="6.2 å¹¶è¡Œè°ƒç”¨ async/await"></a>6.2 å¹¶è¡Œè°ƒç”¨ async/await</h4></li></ul><p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†ä¸¤æ¬¡ awaitï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šç­‰å¾…ä¸€ç§’ï¼ˆæ€»å…±ä¸¤ç§’ï¼‰ã€‚ä¸è¿‡æ—¢ç„¶ <code>a</code> å’Œ <code>b</code> æ²¡æœ‰ç›¸äº’ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Promise.all</code> æ¥å¹¶è¡Œè°ƒç”¨å®ƒä»¬ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ªPromise</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">doubleAndAdd</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	<span class="comment">//æ³¨æ„ï¼šè¿™è¾¹ä½¿ç”¨ Promise.all</span></span><br><span class="line">	<span class="comment">//æ³¨æ„åˆ°ä½¿ç”¨æ•°ç»„è§£æ„,æ•è·ç»“æœ</span></span><br><span class="line">	[a, b] = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([doubleAfterlSec(a), doubleAfterlSec(b)]);</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line">doubleAndAdd(<span class="number">1</span>, <span class="number">2</span>).then(<span class="built_in">console</span>.log);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleAfterlSec</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span> (<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">		setTimeout(resolve(param * <span class="number">2</span>), <span class="number">1000</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><h4 id="6-3-async-await-å‡½æ•°æ—¶çš„é”™è¯¯å¤„ç†"><a href="#6-3-async-await-å‡½æ•°æ—¶çš„é”™è¯¯å¤„ç†" class="headerlink" title="6.3 async/await å‡½æ•°æ—¶çš„é”™è¯¯å¤„ç†"></a>6.3 async/await å‡½æ•°æ—¶çš„é”™è¯¯å¤„ç†</h4></li></ul><p>ä½¿ç”¨ async await æ—¶æœ‰å¥½å‡ ç§å¤„ç†é”™è¯¯çš„æ–¹å¼ã€‚</p><blockquote><p>Option 1 - åœ¨å‡½æ•°ä¸­ä½¿ç”¨ try catch</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. ä½¿ç”¨ try catch</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">doubleAndAdd</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		a = <span class="keyword">await</span> doubleAfterlSec(a);</span><br><span class="line">		b = <span class="keyword">await</span> doubleAfterlSec(b);</span><br><span class="line">	&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NaN</span>; <span class="comment">// return something</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line">doubleAndAdd(<span class="string">'one'</span>, <span class="number">2</span>).then(<span class="built_in">console</span>.log) <span class="comment">//NaN</span></span><br><span class="line">doubleAndAdd(<span class="number">1</span>, <span class="number">2</span>).then(<span class="built_in">console</span>.log) <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleAfterlSec</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">let</span> val = param * <span class="number">2</span>;</span><br><span class="line">			<span class="built_in">isNaN</span>(val) &gt; reject(<span class="literal">NaN</span>) : resolve(val);</span><br><span class="line">		&#125;, <span class="number">1000</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Option 2 â€” catch æ¯ä¸€ä¸ª await</p></blockquote><p>ç”±äºæ¯ä¸ª <code>await</code> è¡¨è¾¾å¼éƒ½ä¼šè¿”å›ä¸€ä¸ª Promiseï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨æ¯è¡Œä¸Šæ•è·é”™è¯¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Option 2 - *Catch* æ¯ä¸ªç­‰å¾…çº¿ä¸Šçš„é”™è¯¯</span></span><br><span class="line"><span class="comment">// å› ä¸ºæ¯ä¸ªç­‰å¾…è¡¨è¾¾æœ¬èº«å°±æ˜¯ä¸€ä¸ªPromise</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">doubleAndAdd</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	a = <span class="keyword">await</span> doubleAfter1Sec(a).catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'"a" is NaN'</span>)); <span class="comment">// ğŸ‘ˆ</span></span><br><span class="line">  b = <span class="keyword">await</span> doubleAfter1Sec(b).catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'"b" is NaN'</span>)); <span class="comment">// ğŸ‘ˆ</span></span><br><span class="line">  <span class="keyword">if</span> (!a || !b) &#123;</span><br><span class="line">  	<span class="keyword">return</span> <span class="literal">NaN</span>;</span><br><span class="line">  &#125;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç”¨æ³•:</span></span><br><span class="line">doubleAndAdd(<span class="string">'one'</span>, <span class="number">2</span>).then(<span class="built_in">console</span>.log); <span class="comment">// NaN  and logs:  "a" is NaN</span></span><br><span class="line">doubleAndAdd(<span class="number">1</span>, <span class="number">2</span>).then(<span class="built_in">console</span>.log); <span class="comment">// 6</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleAfter1Sec</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">		setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">let</span> val = param * <span class="number">2</span>;</span><br><span class="line">			<span class="built_in">isNaN</span>(val) ? reject(<span class="literal">NaN</span>) : resolve(val);</span><br><span class="line">		&#125;, <span class="number">1000</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Option 3â€Šâ€”â€Šcatch æ•´ä¸ª async-await å‡½æ•°</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Option 3 - ä¸è¦åšä»»ä½•äº‹æƒ…ï¼Œåœ¨functionå¤–æ•è·</span></span><br><span class="line"><span class="comment">// å› ä¸ºå¼‚æ­¥/ç­‰å¾…è¿”å›ä¸€ä¸ªPromiseï¼Œæˆ‘ä»¬å¯ä»¥æ•æ‰æ•´ä¸ªå‡½æ•°çš„é”™è¯¯</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">doubleAndAdd</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"> a = <span class="keyword">await</span> doubleAfter1Sec(a);</span><br><span class="line"> b = <span class="keyword">await</span> doubleAfter1Sec(b);</span><br><span class="line"> <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line">doubleAndAdd(<span class="string">'one'</span>, <span class="number">2</span>)</span><br><span class="line">.then(<span class="built_in">console</span>.log)</span><br><span class="line">.catch(<span class="built_in">console</span>.log); <span class="comment">// ğŸ‘ˆğŸ‘ˆğŸ¼&lt;------- use "catch"</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleAfter1Sec</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> val = param * <span class="number">2</span>;</span><br><span class="line">   <span class="built_in">isNaN</span>(val) ? reject(<span class="literal">NaN</span>) : resolve(val);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ECMAScript-2018"><a href="#ECMAScript-2018" class="headerlink" title="ECMAScript 2018"></a>ECMAScript 2018</h2><blockquote><p>ECMAScript ç›®å‰å¤„äºæœ€ç»ˆè‰æ¡ˆä¸­ï¼Œå°†äº 2018 å¹´ 6 æœˆæˆ– 7 æœˆå‘å¸ƒã€‚ä»¥ä¸‹æ‰€æœ‰ç‰¹æ€§å‡åœ¨ Stage-4 ä¸­ï¼Œå¹¶å°†æˆä¸º ECMAScript 2018 çš„ä¸€éƒ¨åˆ†ã€‚</p></blockquote><ul><li><h3 id="1-å…±äº«å†…å­˜å’ŒåŸå­æ“ä½œ-Shared-memory-and-atomics"><a href="#1-å…±äº«å†…å­˜å’ŒåŸå­æ“ä½œ-Shared-memory-and-atomics" class="headerlink" title="1. å…±äº«å†…å­˜å’ŒåŸå­æ“ä½œ (Shared memory and atomics)"></a>1. å…±äº«å†…å­˜å’ŒåŸå­æ“ä½œ (<a href="https://github.com/tc39/ecmascript_sharedme" target="_blank" rel="noopener">Shared memory and atomics</a>)</h3></li></ul><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å…ˆè¿›é‡å¤§ç‰¹æ€§ï¼Œæ˜¯å¯¹ JS å¼•æ“çš„æ ¸å¿ƒå¢å¼ºã€‚</p><p><strong>ä¸»è¦çš„æƒ³æ³•æ˜¯ä¸ºäº†ç»™ JavaScript å¸¦æ¥ä¸€äº›å¤šçº¿ç¨‹çš„ç‰¹æ€§ï¼Œå…è®¸å†…å­˜ä¸ä»…ä»…ç”± JS å¼•æ“æ¥ç®¡ç†ï¼Œè€Œæ˜¯ç”± JS å¼€å‘è€…ä»¬è‡ªè¡Œç®¡ç†ï¼Œä»¥ä¾¿å°†æ¥èƒ½å¤Ÿç¼–å†™é«˜æ€§èƒ½ã€å¯å¹¶å‘çš„ç¨‹åºã€‚</strong></p><p>è¿™ä¸ªç‰¹æ€§ç”±ä¸€ä¸ªæ–°çš„å…¨å±€å¯¹è±¡ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer" target="_blank" rel="noopener">SharedArrayBuffer</a> å®ç°ï¼Œå®ƒå°†æ•°æ®å­˜å‚¨åœ¨ä¸€å—<strong>å…±äº«å†…å­˜ç©ºé—´</strong>ä¸­ã€‚æ‰€ä»¥è¿™äº›æ•°æ®å¯ä»¥åœ¨ JS ä¸»çº¿ç¨‹å’Œ web-worker çº¿ç¨‹ä¹‹é—´å…±äº«ã€‚</p><p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ JS ä¸»çº¿ç¨‹å’Œ web-worker ä¹‹é—´å…±äº«æ•°æ®ï¼Œæˆ‘ä»¬å¿…é¡»å¤åˆ¶æ•°æ®å¹¶ä½¿ç”¨ <code>postMessage</code> å°†å…¶å‘é€åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ã€‚æ²¡åˆ«çš„åŠæ³•!</p><p>æ‚¨åªéœ€ä½¿ç”¨ SharedArrayBufferï¼Œæ•°æ®ç«‹é©¬å°±èƒ½åŒæ—¶è¢«ä¸»çº¿ç¨‹å’Œå¤šä¸ª web-worker çº¿ç¨‹è®¿é—®åˆ°ã€‚</p><p>ä½†åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«å†…å­˜å¯èƒ½ä¼šå¯¼è‡´ç«äº‰çŠ¶å†µã€‚ä¸ºäº†é¿å…ç«äº‰æ¡ä»¶ï¼Œåˆå¼•å…¥äº†å…¨å±€å¯¹è±¡ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics" target="_blank" rel="noopener">Atomics</a>ï¼ˆåŸå­æ€§ï¼‰ã€‚Atomics æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œç”¨æ¥åœ¨ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨å…±äº«å†…å­˜çš„æ•°æ®æ—¶ç»™å…±äº«å†…å­˜åŠ é”ã€‚å®ƒè¿˜æä¾›äº†æ–¹æ³•æ¥å®‰å…¨åœ°æ›´æ–°å…±äº«å†…å­˜ä¸­çš„ï¼ˆä¸Šé”çš„ï¼‰æ•°æ®ã€‚</p><blockquote><p>å»ºè®®é€šè¿‡æŸä¸ªåº“ä½¿ç”¨æ­¤ç‰¹æ€§ï¼Œä¸è¿‡ç›®å‰æ²¡æœ‰æ„å»ºåœ¨æ­¤åŠŸèƒ½ä¹‹ä¸Šçš„åº“ã€‚</p></blockquote><p>å¦‚æœæ‚¨æœ‰å…´è¶£ï¼Œæ¨èé˜…è¯»ï¼š</p><ol><li><a href="http://lucasfcosta.com/2017/04/30/JavaScript-From-Workers-to-Shared-Memory.html" target="_blank" rel="noopener">From Workers to Shared Memory</a>â€Šâ€”â€Šlucasfcosta</li><li><a href="https://hacks.mozilla.org/category/code-cartoons/a-cartoon-intro-to-sharedarraybuffers/" target="_blank" rel="noopener">A cartoon intro to SharedArrayBuffers</a>â€Šâ€”â€ŠLin Clark</li><li><a href="http://2ality.com/2017/01/shared-array-buffer.html" target="_blank" rel="noopener">Shared memory and atomics</a>â€Šâ€”â€ŠDr. Axel Rauschmayer</li></ol><ul><li><h3 id="2-ç§»é™¤äº†å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶"><a href="#2-ç§»é™¤äº†å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶" class="headerlink" title="2. ç§»é™¤äº†å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶"></a>2. ç§»é™¤äº†å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶</h3></li></ul><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ¸…æ¥šâ€œå¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆTagged Template literalï¼‰â€æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°ç†è§£è¿™ä¸ªç‰¹æ€§ã€‚</p><p>Tagged template literal æ˜¯ ES2015+ ä¸­çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸å¼€å‘è€…è‡ªå®šä¹‰å¦‚ä½•ä¿®æ”¹å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œä»¥æ ‡å‡†æ–¹å¼æ’å…¥å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ‡å‡†å­—ç¬¦ä¸²æ’å€¼</span></span><br><span class="line"><span class="keyword">const</span> firstName = <span class="string">'Raja'</span>;</span><br><span class="line"><span class="keyword">const</span> greetings = <span class="string">`Hello <span class="subst">$&#123;firstName&#125;</span>!`</span>;</span><br><span class="line"><span class="built_in">console</span>.log(greetings); <span class="comment">// "Hello Raja!"</span></span><br></pre></td></tr></table></figure><p>åœ¨ tagged template literal ä¸­ï¼Œä½ å¯ä»¥ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°ï¼ˆä¾‹å¦‚<code>greet</code>ï¼‰ï¼Œå®ƒæ¥æ”¶å­—ç¬¦ä¸²æ–‡å­—çš„ç¡¬ç¼–ç éƒ¨åˆ†(æ¯”å¦‚ <code>[&#39;Hello&#39;ï¼Œ&#39;ï¼&#39;]</code>ï¼‰ä»¥åŠè¦æ›¿æ¢çš„å˜é‡ï¼ˆä¾‹å¦‚[<code>&#39;Raja&#39;]</code>ï¼‰ä½œä¸ºå‚æ•°ï¼Œè¿”å›å€¼å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œç”±ä½ å†³å®šã€‚</p><p>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†æˆ‘ä»¬çš„è‡ªå®šä¹‰â€œTagâ€å‡½æ•° <code>greet</code> æ ¹æ®å½“å‰æ—¶é—´ä¸ºæ¨¡æ¿å­—ç¬¦ä¸²æ·»åŠ ç›¸åº”çš„é—®å€™è¯­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// "æ ‡è®°â€å‡½æ•°è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰å­—ç¬¦ä¸²æ–‡å­—.</span></span><br><span class="line"><span class="comment">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œgreetè°ƒç”¨timeGreetï¼ˆï¼‰æ¥è¿½åŠ Good</span></span><br><span class="line"><span class="comment">// Morning/Afternoon/Evening è§†å½“å¤©çš„æ—¶é—´è€Œå®š.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">hardCodedPartsArray, ...replacementPartsArray</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(hardCodedPartsArray); <span class="comment">//[ 'Hello ', '!' ]</span></span><br><span class="line"> <span class="built_in">console</span>.log(replacementPartsArray); <span class="comment">//[ 'Raja' ]</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">''</span>;</span><br><span class="line"> hardCodedPartsArray.forEach(<span class="function">(<span class="params">string, i</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (i &lt; replacementPartsArray.length) &#123;</span><br><span class="line">   str += <span class="string">`<span class="subst">$&#123;string&#125;</span> <span class="subst">$&#123;replacementPartsArray[i] || <span class="string">''</span>&#125;</span>`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   str += <span class="string">`<span class="subst">$&#123;string&#125;</span> <span class="subst">$&#123;timeGreet()&#125;</span>`</span>; <span class="comment">//&lt;-- æ’å…¥ Good morning/afternoon/evening here</span></span><br><span class="line">  &#125;</span><br><span class="line"> &#125;);</span><br><span class="line"> <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line"><span class="keyword">const</span> firstName = <span class="string">'Raja'</span>;</span><br><span class="line"><span class="keyword">const</span> greetings = greet<span class="string">`Hello <span class="subst">$&#123;firstName&#125;</span>!`</span>; <span class="comment">//ğŸ‘ˆğŸ¼&lt;-- æ ‡è®°æ–‡å­—</span></span><br><span class="line"><span class="built_in">console</span>.log(greetings); <span class="comment">//'Hello  Raja! Good Morning!' ğŸ”¥</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeGreet</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">const</span> hr = <span class="keyword">new</span> <span class="built_in">Date</span>().getHours();</span><br><span class="line"> <span class="keyword">return</span> hr &lt; <span class="number">12</span></span><br><span class="line">  ? <span class="string">'Good Morning!'</span></span><br><span class="line">  : hr &lt; <span class="number">18</span> ? <span class="string">'Good Afternoon!'</span> : <span class="string">'Good Evening!'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å·²ç»è®¨è®ºäº†â€œæ ‡ç­¾â€å‡½æ•°æ˜¯ä»€ä¹ˆï¼Œè®¸å¤šäººæƒ³è¦åœ¨ä¸åŒçš„åŸŸä¸­ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚ç”¨äºç»ˆç«¯å‘½ä»¤ï¼Œæˆ–è€…æ‹¼è£… HTTP è¯·æ±‚çš„ URI ç­‰ç­‰ã€‚</p><p>âš ï¸ æ ‡è®°å­—ç¬¦ä¸²æ–‡å­—çš„é—®é¢˜</p><p>é—®é¢˜æ˜¯ES2015å’ŒES2016è§„èŒƒä¸å…è®¸ä½¿ç”¨â€œ<code>\u</code>â€ï¼ˆunicodeï¼‰ï¼Œâ€œ<code>\x</code>â€ï¼ˆåå…­è¿›åˆ¶ï¼‰ç­‰è½¬ä¹‰å­—ç¬¦ï¼Œé™¤éå®ƒä»¬çœ‹èµ·æ¥å®Œå…¨åƒ<code>\u00A9</code>æˆ–<code>\uA9A</code>æˆ–<code>\xA9</code>ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªå†…éƒ¨ä½¿ç”¨å…¶ä»–åŸŸè§„åˆ™ï¼ˆå¦‚ç»ˆç«¯è§„åˆ™ï¼‰çš„Taggedå‡½æ•°ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦ä½¿ç”¨<strong>\ubla123abla</strong>ï¼Œå®ƒçœ‹èµ·æ¥ä¸åƒ<code>\u0049</code>æˆ–<code>\u{@F804}</code>ï¼Œé‚£ä¹ˆæ‚¨å°†å¾—åˆ°è¯­æ³•é”™è¯¯ã€‚</p><p>åœ¨ES2018ä¸­ï¼Œåªè¦æ ‡è®°å‡½æ•°è¿”å›å…·æœ‰â€œcookedâ€å±æ€§ï¼ˆå…¶ä¸­æ— æ•ˆå­—ç¬¦ä¸ºâ€œundefinedâ€ï¼‰çš„å¯¹è±¡ä¸­çš„å€¼ï¼Œç„¶åå°†â€œrawâ€å±æ€§ï¼ˆä¸ä»»ä½•ä½ æƒ³è¦çš„ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTagFunc</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> &#123; <span class="string">"cooked"</span>: <span class="string">"undefined"</span>, <span class="string">"raw"</span>: str.raw[<span class="number">0</span>] &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = myTagFunc <span class="string">`hi \ubla123abla`</span>; <span class="comment">//è°ƒç”¨ myTagFunc</span></span><br><span class="line"></span><br><span class="line">str <span class="comment">// &#123; cooked: "undefined", raw: "hi \\unicode" &#125;</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="3-æ­£åˆ™è¡¨è¾¾å¼çš„â€œ-â€æ ‡è¯†"><a href="#3-æ­£åˆ™è¡¨è¾¾å¼çš„â€œ-â€æ ‡è¯†" class="headerlink" title="3. æ­£åˆ™è¡¨è¾¾å¼çš„â€œ.â€æ ‡è¯†"></a>3. æ­£åˆ™è¡¨è¾¾å¼çš„â€œ.â€æ ‡è¯†</h3></li></ul><p>ç›®å‰åœ¨æ­£åˆ™ä¸­ï¼Œè™½ç„¶ç‚¹å·ï¼ˆâ€œ.â€ï¼‰åº”è¯¥åŒ¹é…ä»»ä¸€å•ä¸ªå­—ç¬¦ï¼Œä½†å…¶å®å®ƒæ— æ³•åŒ¹é…æ¢è¡Œç¬¦ï¼Œå¦‚ <code>\n \r \f</code> ç­‰ç­‰ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¹‹å‰</span></span><br><span class="line">/first.second/.test(<span class="string">'first\nsecond'</span>); <span class="comment">//false</span></span><br></pre></td></tr></table></figure><p>è¿™é¡¹æ”¹è¿›ä½¿ç‚¹å·å¯ä»¥åŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚ä¸ºäº†ç¡®ä¿è¿™ä¸ä¼šç ´åä»»ä½•å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ­£åˆ™è¡¨è¾¾å¼åŠ ä¸Š <code>\s</code> æ ‡è¯†å®ƒæ‰ä¼šç”Ÿæ•ˆã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ECMAScript 2018</span></span><br><span class="line">/first.second/s.test(<span class="string">'first\nsecond'</span>); <span class="comment">//true   Notice: /s ğŸ‘ˆğŸ¼</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯<a href="https://github.com/tc39/proposal-regexp-dotall-flag" target="_blank" rel="noopener">ææ¡ˆ</a>æ–‡æ¡£ä¸­çš„ APIï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> re = <span class="regexp">/foo.bar/</span>s;</span><br><span class="line"><span class="comment">// æˆ–è€… const re = new RegExp('foo.bar', 's');</span></span><br><span class="line"></span><br><span class="line">re.test(<span class="string">'f00\nbar'</span>); <span class="comment">//true</span></span><br><span class="line">re.dotAll <span class="comment">// true</span></span><br><span class="line">re.flags <span class="comment">// 's'</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="4-æ­£åˆ™è¡¨è¾¾å¼å‘½åç»„æ•è·-RegExp-Named-Group-Captures-ğŸ”¥"><a href="#4-æ­£åˆ™è¡¨è¾¾å¼å‘½åç»„æ•è·-RegExp-Named-Group-Captures-ğŸ”¥" class="headerlink" title="4. æ­£åˆ™è¡¨è¾¾å¼å‘½åç»„æ•è·(RegExp Named Group Captures ğŸ”¥)"></a>4. æ­£åˆ™è¡¨è¾¾å¼å‘½åç»„æ•è·(RegExp Named Group Captures ğŸ”¥)</h3></li></ul><p>è¿™ç§å¢å¼ºåŠŸèƒ½æ˜¯ä»å…¶ä»–è¯­è¨€ï¼ˆå¦‚Pythonï¼ŒJavaç­‰ï¼‰å¼•å…¥çš„æœ‰ç”¨ç‰¹æ€§ã€‚ç§°ä¸ºâ€œå‘½åç»„â€ã€‚è¯¥ç‰¹æ€§å…è®¸å¼€å‘è€…ä»¥ <code>(?&lt;name&gt; ...)</code> çš„å½¢å¼ä¸ºæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„åˆ†ç»„è¿›è¡Œå‘½åã€‚ç„¶åï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨è¯¥åç§°è½»æ¾è·å–ä»–ä»¬éœ€è¦çš„ä»»ä½•åˆ†ç»„ã€‚</p><ul><li><h4 id="4-1-åŸºæœ¬å‘½åç»„çš„ä¾‹å­"><a href="#4-1-åŸºæœ¬å‘½åç»„çš„ä¾‹å­" class="headerlink" title="4.1 åŸºæœ¬å‘½åç»„çš„ä¾‹å­"></a>4.1 åŸºæœ¬å‘½åç»„çš„ä¾‹å­</h4></li></ul><p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>(?&lt;year&gt;) (?&lt;month&gt;) å’Œ (?day)</code> åç§°å¯¹ä¸€ä¸ªæ—¥æœŸæ­£åˆ™çš„ä¸åŒéƒ¨åˆ†è¿›è¡Œåˆ†ç»„ã€‚ç»“æœå°†ä¼šæ˜¯ä¸€ä¸ªåŒ…å« <code>groups</code> çš„å¯¹è±¡ï¼Œå…¶å€¼åˆæ˜¯ä¸€ä¸ªåŒ…å« <code>year</code>ï¼Œ<code>month</code> å’Œ <code>day</code> å±æ€§çš„å¯¹è±¡ï¼Œå®ƒä»¬çš„å€¼åˆ†åˆ«æ˜¯å¯¹åº”çš„åˆ†ç»„æ•è·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¹‹å‰</span></span><br><span class="line"><span class="keyword">let</span> re1 = <span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span>;</span><br><span class="line"><span class="keyword">let</span> result1 = re1.exec(<span class="string">'2015-01-02'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result1);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//["2015-01-02", "2015", "01", "02", index: 0, input: "2015-01-02", groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥åï¼ˆES2018ï¼‰</span></span><br><span class="line"><span class="keyword">let</span> re2 = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/u</span>;</span><br><span class="line"><span class="keyword">let</span> result2 = re2.exec(<span class="string">'2015-01-02'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result2);</span><br><span class="line"><span class="comment">// ["2015-01-02", "2015", "01", "02", index: 0, input: "2015-01-02", groups: &#123; year: '2015', month: '01', day: '02'&#125;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•ï¼š</span></span><br><span class="line"><span class="comment">// ä½ æƒ³è¦çŸ¥é“å¹´ä»½ï¼Œä½ å¯ä»¥ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result2.groups.year) <span class="comment">//2015</span></span><br></pre></td></tr></table></figure><ul><li><h4 id="4-2-åœ¨æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«å†…ä½¿ç”¨å‘½åç»„"><a href="#4-2-åœ¨æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«å†…ä½¿ç”¨å‘½åç»„" class="headerlink" title="4.2 åœ¨æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«å†…ä½¿ç”¨å‘½åç»„"></a>4.2 åœ¨æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«å†…ä½¿ç”¨å‘½åç»„</h4></li></ul><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>\k&lt;group name&gt;</code> æ ¼å¼åœ¨æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«ä¸­åå‘å¼•ç”¨è¯¥ç»„ã€‚ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å®ƒçš„ç”¨æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸‹é¢ä¾‹å­ï¼Œæœ‰ä¸ªç»„å«â€œfruitâ€</span></span><br><span class="line"><span class="comment">//å®ƒæ—¢èƒ½åŒ¹é…â€œappleâ€åˆèƒ½åŒ¹é…â€œorangeâ€.æˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€œ\k&lt;group name&gt;â€æ¥å›å¼•ç”¨è¿™ä¸ªç»„çš„ç»“æœ,(\k&lt;fruit&gt;)</span></span><br><span class="line"><span class="comment">//æ‰€ä»¥å®ƒåŒ¹é…==ä¸¤ä¾§çš„åŒä¸€ä¸ªå•è¯</span></span><br><span class="line"><span class="keyword">let</span> sameWords = <span class="regexp">/(?&lt;fruit&gt;apple|orange)==\k&lt;fruit&gt;/u</span>;</span><br><span class="line"></span><br><span class="line">sameWords.test(<span class="string">'apple==apple'</span>);  <span class="comment">//true</span></span><br><span class="line">sameWords.test(<span class="string">'orange==orange'</span>);  <span class="comment">//true</span></span><br><span class="line">sameWords.test(<span class="string">'apple==orange'</span>);  <span class="comment">//false</span></span><br></pre></td></tr></table></figure><ul><li><h4 id="4-3-åœ¨-String-prototype-replace-ä¸­ä½¿ç”¨å‘½åç»„"><a href="#4-3-åœ¨-String-prototype-replace-ä¸­ä½¿ç”¨å‘½åç»„" class="headerlink" title="4.3 åœ¨ String.prototype.replace ä¸­ä½¿ç”¨å‘½åç»„"></a>4.3 åœ¨ String.prototype.replace ä¸­ä½¿ç”¨å‘½åç»„</h4></li></ul><p>ç°åœ¨ï¼ŒString çš„ <code>replace</code> å®ä¾‹æ–¹æ³•ä¹ŸåŒ…å«äº†å‘½ååˆ†ç»„çš„ç‰¹æ€§ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°äº¤æ¢å­—ç¬¦ä¸²ä¸­çš„å•è¯ã€‚</p><p>ä¾‹å¦‚ï¼ŒæŠŠ â€œfirstName, lastNameâ€ å˜æˆ â€œlastName, firstNameâ€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ¢â€œfirstName, lastNameâ€ ==&gt; â€œlastName, firstNameâ€</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> re = <span class="regexp">/(?&lt;firstName&gt;[A-Za-z]+) (?&lt;lastName&gt;[A-Za-z]+$)/u</span>;</span><br><span class="line"></span><br><span class="line"><span class="string">'Raja Rao'</span>.replace(re, <span class="string">'$&lt;lastName&gt;, $&lt;firstName&gt;'</span>); <span class="comment">// "Rao, Raja"</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="5-å¯¹è±¡çš„å…¶ä½™å±æ€§-Rest-properties-for-Objects"><a href="#5-å¯¹è±¡çš„å…¶ä½™å±æ€§-Rest-properties-for-Objects" class="headerlink" title="5. å¯¹è±¡çš„å…¶ä½™å±æ€§(Rest properties for Objects)"></a>5. å¯¹è±¡çš„å…¶ä½™å±æ€§(Rest properties for Objects)</h3></li></ul><p>rest æ“ä½œç¬¦ <code>...</code>ï¼ˆä¸‰ä¸ªç‚¹ï¼‰å…è®¸æˆ‘ä»¬æå–å°šæœªæå–çš„å¯¹è±¡å±æ€§ã€‚</p><ul><li><h4 id="5-1-ä½ å¯ä»¥ä½¿ç”¨-rest-æ¥å¸®åŠ©åªæå–ä½ æƒ³è¦çš„å±æ€§"><a href="#5-1-ä½ å¯ä»¥ä½¿ç”¨-rest-æ¥å¸®åŠ©åªæå–ä½ æƒ³è¦çš„å±æ€§" class="headerlink" title="5.1 ä½ å¯ä»¥ä½¿ç”¨ rest æ¥å¸®åŠ©åªæå–ä½ æƒ³è¦çš„å±æ€§"></a>5.1 ä½ å¯ä»¥ä½¿ç”¨ rest æ¥å¸®åŠ©åªæå–ä½ æƒ³è¦çš„å±æ€§</h4></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æå– firstName å’Œ age</span></span><br><span class="line"><span class="comment">// å°†å…¶ä½™çš„é¡¹å­˜å‚¨åœ¨â€œremainingâ€å˜é‡ä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; fristName, age, ...remaining &#125; = &#123;</span><br><span class="line">	fristName: <span class="string">'john'</span>,</span><br><span class="line">	lastName: <span class="string">'smith'</span>,</span><br><span class="line">	age: <span class="number">20</span>,</span><br><span class="line">	height: <span class="string">'5.10'</span>,</span><br><span class="line">	race: <span class="string">'martian'</span>,</span><br><span class="line">&#125;;</span><br><span class="line">firstName; <span class="comment">//john</span></span><br><span class="line">age <span class="comment">//20</span></span><br><span class="line">remaining <span class="comment">//&#123; lastName: 'smith', height: '5.10', race: 'martian' &#125;</span></span><br></pre></td></tr></table></figure><ul><li><h4 id="5-2-æ›´å¥½çš„æ˜¯ï¼Œä½ å¯ä»¥åˆ é™¤ä¸éœ€è¦çš„ï¼ğŸ”¥ğŸ”¥"><a href="#5-2-æ›´å¥½çš„æ˜¯ï¼Œä½ å¯ä»¥åˆ é™¤ä¸éœ€è¦çš„ï¼ğŸ”¥ğŸ”¥" class="headerlink" title="5.2 æ›´å¥½çš„æ˜¯ï¼Œä½ å¯ä»¥åˆ é™¤ä¸éœ€è¦çš„ï¼ğŸ”¥ğŸ”¥"></a>5.2 æ›´å¥½çš„æ˜¯ï¼Œä½ å¯ä»¥åˆ é™¤ä¸éœ€è¦çš„ï¼ğŸ”¥ğŸ”¥</h4></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡è®¾æˆ‘ä»¬æƒ³è¦ç§»é™¤SSNï¼Œæˆ‘ä»¬ä¸éœ€è¦éå†æ•´ä¸ªå¯¹è±¡å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„cleanObjã€‚</span></span><br><span class="line"><span class="comment">// ç®€å•åœ°ä½¿ç”¨restè§£æ„æ¥æå–å‡ºSSNï¼Œå¹¶å°†å…¶ä½™çš„ä¿å­˜åœ¨cleanObjä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; SSN, ...cleanObj &#125; = &#123;</span><br><span class="line">	firstName: <span class="string">'john'</span>,</span><br><span class="line">	lastName: <span class="string">'smith'</span>,</span><br><span class="line">	SSN: <span class="string">'123-45-6789'</span>,</span><br><span class="line">	race: <span class="string">'martian'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cleanObj; <span class="comment">//&#123;	firstName: 'john', lastName: 'smith', race: 'martian' &#125;</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="6-å±•å¼€å¯¹è±¡å±æ€§-Spread-properties-for-Objects"><a href="#6-å±•å¼€å¯¹è±¡å±æ€§-Spread-properties-for-Objects" class="headerlink" title="6. å±•å¼€å¯¹è±¡å±æ€§ (Spread properties for Objects)"></a>6. å±•å¼€å¯¹è±¡å±æ€§ (Spread properties for Objects)</h3></li></ul><p>å±•å¼€å±æ€§çœ‹èµ·æ¥å°±åƒå…·æœ‰ä¸‰ä¸ªç‚¹çš„ Rest å±æ€§ä¸€æ · <code>...</code>, ä½†åŒºåˆ«åœ¨äºæ‚¨ä½¿ç”¨å±•å¼€æ¥åˆ›å»ºï¼ˆé‡æ–°æ„å»ºï¼‰æ–°å¯¹è±¡ã€‚</p><blockquote><p>æç¤ºï¼šå±•å¼€æ“ä½œç¬¦ç”¨äºç­‰å·çš„å³ä¾§ã€‚Rest ç”¨äºç­‰å·çš„å·¦ä¾§ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// person å’Œ account åˆå¹¶</span></span><br><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">fName</span>: <span class="string">'john'</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> account = &#123; <span class="attr">name</span>: <span class="string">'bofa'</span>, <span class="attr">amount</span>: <span class="string">'$1000'</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡æ‰©å±•è¿ç®—ç¬¦æå–personå’Œaccountçš„å±æ€§ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ä¸­ã€‚</span></span><br><span class="line"><span class="keyword">const</span> personAndAccount = &#123; ...person, ...account &#125;;</span><br><span class="line">personAndAccount; <span class="comment">// &#123;fName: 'john', age: 20, name: 'bofa', amount: '$1000' &#125;</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="7-æ­£åˆ™è¡¨è¾¾å¼çš„åè¡Œæ–­è¨€ï¼ˆé›¶å®½åå‘æ–­è¨€ï¼‰"><a href="#7-æ­£åˆ™è¡¨è¾¾å¼çš„åè¡Œæ–­è¨€ï¼ˆé›¶å®½åå‘æ–­è¨€ï¼‰" class="headerlink" title="7. æ­£åˆ™è¡¨è¾¾å¼çš„åè¡Œæ–­è¨€ï¼ˆé›¶å®½åå‘æ–­è¨€ï¼‰"></a>7. æ­£åˆ™è¡¨è¾¾å¼çš„åè¡Œæ–­è¨€ï¼ˆé›¶å®½åå‘æ–­è¨€ï¼‰</h3></li></ul><p>è¿™æ˜¯å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„å¢å¼ºï¼Œå®ƒå…è®¸æˆ‘ä»¬ç¡®ä¿æŸäº›å­—ç¬¦ä¸²å‡ºç°åœ¨å…¶ä»–å­—ç¬¦ä¸²<em>ä¹‹å‰</em>ã€‚</p><p>æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç»„ <code>(?&lt;=...)</code>ï¼ˆé—®å·ï¼Œå°äºï¼Œç­‰äºï¼‰æ¥æŸ¥æ‰¾è‚¯å®šæ­£æ–­è¨€ã€‚</p><p>æ­¤å¤–ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>(?&lt;!...)</code>ï¼ˆé—®å·ï¼Œå°äºï¼Œæ„Ÿå¹å·ï¼‰æ¥æŸ¥çœ‹å¦è´Ÿæ–­è¨€ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œåªè¦æ–­è¨€é€šè¿‡ï¼Œå°±ä¼šåŒ¹é…ã€‚</p><p>æ­£æ–­è¨€ï¼šå‡è®¾æˆ‘ä»¬æƒ³è¦ç¡®ä¿ <code>ï¼ƒ</code> ç¬¦å·åœ¨å•è¯ <code>winning</code> ä¹‹å‰å­˜åœ¨ï¼ˆå³ï¼š<code>#winning</code>ï¼‰å¹¶ä¸”å¸Œæœ›æ­£åˆ™è¡¨è¾¾å¼åªè¿”å›å­—ç¬¦ä¸²â€œwinningâ€ã€‚ä½ å¯ä»¥è¿™æ ·å†™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/(?<span class="xml"><span class="tag">&lt;<span class="name">=#).*</span>/<span class="attr">.test</span>('<span class="attr">winning</span>'); // <span class="attr">false</span></span></span></span><br><span class="line"><span class="xml">/(?<span class="tag">&lt;<span class="name">=#).*</span>/<span class="attr">.test</span>('#<span class="attr">winning</span>'); // <span class="attr">true</span></span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//ä¹‹å‰</span></span><br><span class="line"><span class="xml">'#winning'.match(/#.*/)[0]; // '#wining',åŒ…å«#</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//ES2018å</span></span><br><span class="line"><span class="xml">'#winning'.match(/(?<span class="tag">&lt;<span class="name">=#).*</span>/)[<span class="attr">0</span>]; // '<span class="attr">wining</span>' æ²¡æœ‰#, #æ˜¯ç”¨æ¥éªŒè¯çš„ã€‚</span></span></span><br></pre></td></tr></table></figure><p>è´Ÿæ–­è¨€ï¼šå‡è®¾æˆ‘ä»¬æƒ³æå–å‰é¢æ˜¯ â‚¬ ç¬¦å·è€Œä¸æ˜¯ $ ç¬¦å·çš„æ•°å­—ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3.00ä¸èƒ½åŒ¹é…ï¼Œå› ä¸ºç¬¦å·$åœ¨å‰é¢</span></span><br><span class="line"></span><br><span class="line"><span class="string">'A gallon of milk is $3.00'</span>.match(<span class="regexp">/(?&lt;\$)\d+\.?\d+/</span>); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.43åŒ¹é…æˆåŠŸï¼Œå› ä¸ºå‰é¢æ²¡æœ‰ç¬¦å·$</span></span><br><span class="line"><span class="comment">//å½“åŒ¹é…æ—¶ï¼Œä¸åŒ…å«ç¬¦å·â‚¬</span></span><br><span class="line"><span class="string">'A gallon of milk is â‚¬3.00'</span>.match(<span class="regexp">/(?&lt;\$)\d+\.?\d+/</span>)[<span class="number">0</span>]; <span class="comment">//2.43</span></span><br></pre></td></tr></table></figure><ul><li><h3 id="8-æ­£åˆ™è¡¨è¾¾å¼-Unicode-å±æ€§è½¬ä¹‰ï¼ˆRegExp-Unicode-Property-Escapesï¼‰"><a href="#8-æ­£åˆ™è¡¨è¾¾å¼-Unicode-å±æ€§è½¬ä¹‰ï¼ˆRegExp-Unicode-Property-Escapesï¼‰" class="headerlink" title="8. æ­£åˆ™è¡¨è¾¾å¼ Unicode å±æ€§è½¬ä¹‰ï¼ˆRegExp Unicode Property Escapesï¼‰"></a>8. æ­£åˆ™è¡¨è¾¾å¼ Unicode å±æ€§è½¬ä¹‰ï¼ˆ<a href="https://github.com/tc39/proposal-regexp-unicode-property-escapes" target="_blank" rel="noopener">RegExp Unicode Property Escapes</a>ï¼‰</h3></li></ul><p>è¦ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å„ç§ Unicode å­—ç¬¦å¹¶ä¸å®¹æ˜“ã€‚åƒ <code>\w</code>ï¼Œ<code>\W</code>ï¼Œ<code>\d</code> ç­‰åªèƒ½åŒ¹é…è‹±æ–‡å­—ç¬¦å’Œæ•°å­—ã€‚ä½†æ˜¯å¯¹äºå°åº¦è¯­ï¼Œå¸Œè…Šè¯­ç­‰å…¶ä»–è¯­è¨€çš„æ•°å­—å‘¢ï¼Ÿ</p><p>è¿™å°±æ˜¯ Unicode Property Escapes çš„ç”¨æ­¦ä¹‹åœ°ã€‚ç»“æœæ˜¯ï¼ŒUnicode ä¸ºæ¯ä¸ªç¬¦å·ï¼ˆå­—ç¬¦ï¼‰æ·»åŠ äº†å…ƒæ•°æ®å±æ€§ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å¯¹å„ç§ç¬¦å·è¿›è¡Œåˆ†ç»„æˆ–æè¿°å„ç§ç¬¦å·ã€‚</p><p>ä¾‹å¦‚ï¼ŒUnicode æ•°æ®åº“å°†æ‰€æœ‰å°åœ°è¯­å­—ç¬¦ï¼ˆà¤¹à¤¿à¤¨à¥à¤¦à¥€ï¼‰æ”¾åœ¨ä¸€ä¸ªå€¼ä¸º <code>Devanagari</code> çš„ <code>Script</code> å±æ€§ï¼Œå’Œä¸€ä¸ªå…·æœ‰ç›¸åŒå€¼ <code>Devanagari</code> çš„ <code>Script_Extensions</code>çš„å±æ€§ä¸­ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æœç´¢ <code>Script=Devanagari</code> å¾—åˆ°æ‰€æœ‰å°åœ°æ–‡å­—ç¬¦ã€‚</p><blockquote><p>Devanagari(æ¢µæ–‡)å¯ç”¨äºé©¬æ‹‰åœ°è¯­ï¼ŒåŒ—å°åº¦è¯­ï¼Œæ¢µè¯­ç­‰å„ç§å°åº¦è¯­è¨€ã€‚</p></blockquote><p>ä» ECMAScript 2018 å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>\p</code> è½¬ä¹‰å­—ç¬¦å’Œ <code>{Script=Devanagari}</code> æ¥åŒ¹é…æ‰€æœ‰å°åº¦å­—ç¬¦ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼š<code>\p{Script=Devanagari}</code> æ¥åŒ¹é…æ‰€æœ‰æ¢µæ–‡å­—ç¬¦ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»–è·ŸéšåŒ¹é…å¤šä¸ªå°åœ°æ–‡å­—ç¬¦</span></span><br><span class="line">/^\p&#123;Script=Devanagari&#125;+$/u.test(<span class="string">'à¤¹à¤¿à¤¨à¥à¤¦à¥€'</span>); <span class="comment">//true</span></span><br><span class="line"><span class="comment">//PSï¼šæœ‰3ä¸ªå°åœ°æ–‡å­—ç¬¦h</span></span><br></pre></td></tr></table></figure><p>ç±»ä¼¼åœ°ï¼ŒUnicode æ•°æ®åº“ä¸­å¸Œè…Šå­—ç¬¦çš„ <code>Script_Extensions</code>ï¼ˆå’Œ<code>Script</code>ï¼‰å€¼ä¸º<code>Greek</code>ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Script_Extensions=Greek</code> æˆ– <code>Script=Greek</code> æ¥æœç´¢æ‰€æœ‰å¸Œè…Šå­—ç¬¦ã€‚</p><p><strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼š<code>\p{Script = Greek}</code> æ¥åŒ¹é…æ‰€æœ‰å¸Œè…Šå­—ç¬¦ã€‚</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»¥ä¸‹åŒ¹é…ä¸€ä¸ªå¸Œè…Šå­—ç¬¦</span></span><br><span class="line">/\p&#123;Script_Extensions=Greek&#125;/u.test(<span class="string">'Ï€'</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼ŒUnicode æ•°æ®åº“å°†å„ç§ç±»å‹çš„ Emoji å­˜å‚¨åœ¨å±æ€§å€¼ä¸ºâ€œtrueâ€çš„å¸ƒå°”å±æ€§ <code>Emoji</code>ï¼Œ<code>Emoji_Component</code>ï¼Œ<code>Emoji_Presentation</code>ï¼Œ<code>Emoji_Modifier</code> å’Œ <code>Emoji_Modifier_Base</code> ä¸‹ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•åœ°ä½¿ç”¨ <code>Emoji=true</code> æ¥æŸ¥æ‰¾æ‰€æœ‰è¡¨æƒ…ç¬¦å·ã€‚</p><p><strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š<code>\p{Emoji}</code>ï¼Œ<code>\Emoji_Modifier</code> ç­‰æ¥åŒ¹é…å„ç§ Emojiã€‚</strong></p><p>ä¸‹é¢çš„ä¾‹å­å°†ä¼šæ¸…æ¥šã€‚<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸‹é¢æ˜¯åŒ¹é…è¡¨æƒ…å­—ç¬¦</span></span><br><span class="line">/\p&#123;Emoji&#125;/u.test(<span class="string">'â¤ï¸'</span>); <span class="comment">//true</span></span><br><span class="line"><span class="comment">// ä¸‹é¢çš„æ“ä½œå¤±è´¥äº†ï¼Œå› ä¸ºé»„è‰²çš„emojisæ²¡æœ‰Emoji_Modifier!</span></span><br><span class="line">/\p&#123;Emoji&#125;\p&#123;Emoji_Modifier&#125;/u.test(<span class="string">'âœŒï¸'</span>); <span class="comment">//false</span></span><br><span class="line"><span class="comment">//ä¸‹é¢çš„æ“ä½œæ˜¯åŒ¹é…çš„ï¼Œ\p&#123;Emoji&#125; ç´§è·Ÿåé¢æ˜¯ \p&#123;Emoji_Modifier&#125;</span></span><br><span class="line">/\p&#123;Emoji&#125;\p&#123;Emoji_Modifier&#125;/u.test(<span class="string">'âœŒğŸ½'</span>); <span class="comment">//true</span></span><br><span class="line"><span class="comment">// è§£é‡Š:</span></span><br><span class="line"><span class="comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œèƒœåˆ©è¡¨æƒ…æ˜¯é»„è‰²çš„ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ç›¸åŒè¡¨æƒ…çš„æ£•è‰²ã€é»‘è‰²æˆ–å…¶ä»–ï¼Œå®ƒä»¬è¢«è®¤ä¸ºæ˜¯åŸå§‹è¡¨æƒ…çš„å˜ä½“ï¼Œå¹¶ä½¿ç”¨ä¸¤ä¸ªunicodeå­—ç¬¦è¡¨ç¤ºã€‚ä¸€ä¸ªæ˜¯åŸå§‹è¡¨æƒ…ç¬¦å·ï¼Œå¦ä¸€ä¸ªæ˜¯é¢œè‰²çš„unicodeå­—ç¬¦ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬åªçœ‹åˆ°ä¸€ä¸ªæ£•è‰²çš„èƒœåˆ©è¡¨æƒ…ç¬¦å·ï¼Œä½†å®ƒå®é™…ä¸Šä½¿ç”¨äº†ä¸¤ä¸ªunicodeå­—ç¬¦ï¼Œä¸€ä¸ªç”¨äºè¡¨æƒ…ç¬¦å·ï¼Œå¦ä¸€ä¸ªç”¨äºæ£•è‰²ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨Unicodeæ•°æ®åº“ä¸­ï¼Œè¿™äº›é¢œè‰²å…·æœ‰Emoji_Modifierå±æ€§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨\p&#123;Emoji&#125;å’Œ\p&#123;Emoji_Modifier&#125;æ¥æ­£ç¡®å’Œå®Œå…¨åŒ¹é…æ£•è‰²çš„è¡¨æƒ…ç¬¦å·ã€‚</span></span><br><span class="line"></span><br><span class="line">/\p&#123;Emoji&#125;\p&#123;Emoji_Modifier&#125;/u.test(<span class="string">'âœŒğŸ½'</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p></p><p><strong>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤§å†™çš„â€œPâ€ï¼ˆ<code>\P</code>ï¼‰è½¬ä¹‰å­—ç¬¦è€Œä¸æ˜¯å° pï¼ˆ<code>\p</code>ï¼‰æ¥å¦å®šåŒ¹é…ã€‚</strong></p><p>å‚è€ƒï¼š</p><ol><li><a href="https://mathiasbynens.be/notes/es-unicode-property-escapes" target="_blank" rel="noopener">ECMAScript 2018 Proposal</a></li><li><a href="https://mathiasbynens.be/notes/es-unicode-property-escapes" target="_blank" rel="noopener">https://mathiasbynens.be/notes/es-unicode-property-escapes</a></li></ol><ul><li><h3 id="9-Promise-prototype-finally"><a href="#9-Promise-prototype-finally" class="headerlink" title="9. Promise.prototype.finally()"></a>9. Promise.prototype.finally()</h3></li></ul><p><code>finally()</code> æ˜¯ Promise æ–°å¢çš„å®ä¾‹æ–¹æ³•ã€‚ä»–çš„ä¸»è¦æƒ³æ³•æ˜¯æ— è®º <code>resolve</code> æˆ–æ˜¯ <code>reject</code> åéƒ½æ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°ä»¥å¸®åŠ©æ¸…ç†äº‹æƒ…ã€‚<strong><code>finally</code> å›è°ƒè¢«è°ƒç”¨æ—¶ä¸ä¼ å…¥å‚æ•°ï¼Œå¹¶ä¸”æ— è®ºå¦‚ä½•æ€»æ˜¯è¢«æ‰§è¡Œã€‚</strong></p><p>æˆ‘ä»¬æ¥çœ‹çœ‹å„ç§æƒ…å†µ:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Resolve</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> started = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">	resolve(<span class="string">'all good'</span>);</span><br><span class="line">&#125;)</span><br><span class="line">	.then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(val); <span class="comment">//all good</span></span><br><span class="line">	&#125;)</span><br><span class="line">	.catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(e)l <span class="comment">// è·³è¿‡</span></span><br><span class="line">	&#125;)</span><br><span class="line">	.finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'This function is always executed!'</span>);</span><br><span class="line">		started = <span class="literal">false</span>; <span class="comment">// æ¸…é™¤</span></span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Reject</span></span><br><span class="line"><span class="keyword">let</span> started = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">	resolve(<span class="string">'reject apple'</span>);</span><br><span class="line">&#125;)</span><br><span class="line">	.then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(val); <span class="comment">//reject apple</span></span><br><span class="line">	&#125;)</span><br><span class="line">	.catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(e)l <span class="comment">//catchè¢«è·³è¿‡</span></span><br><span class="line">	&#125;)</span><br><span class="line">	.finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">//æ³¨æ„è¿™é‡Œæ²¡æœ‰ä»»ä½•å€¼</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'This function is always executed!'</span>);</span><br><span class="line">		started = <span class="literal">false</span>; <span class="comment">//æ¸…é™¤</span></span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é”™è¯¯æƒ…å†µ1</span></span><br><span class="line"><span class="comment">//Promise æŠ›å‡ºé”™è¯¯</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> started = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Error'</span>);</span><br><span class="line">&#125;)</span><br><span class="line">	.then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(val); <span class="comment">// è·³è¿‡</span></span><br><span class="line">	&#125;)</span><br><span class="line">	.catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(e)l <span class="comment">// å‡ºç°é”™è¯¯catchè¢«è°ƒç”¨</span></span><br><span class="line">	&#125;)</span><br><span class="line">	.finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// æ³¨æ„è¿™é‡Œæ²¡æœ‰ä»»ä½•å€¼</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'This function is always executed!'</span>);</span><br><span class="line">		started = <span class="literal">false</span>; <span class="comment">// æ¸…é™¤</span></span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯ä»â€œcatchâ€äº‹ä»¶ä¸­æŠ›å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> started = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'something happend'</span>);</span><br><span class="line">&#125;)</span><br><span class="line">	.then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(val); <span class="comment">// è·³è¿‡</span></span><br><span class="line">	&#125;)</span><br><span class="line">	.catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'throw another error'</span>)</span><br><span class="line">	&#125;)</span><br><span class="line">	.finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// æ³¨æ„è¿™é‡Œæ²¡æœ‰ä»»ä½•å€¼</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'This function is always executed!'</span>);</span><br><span class="line">		started = <span class="literal">false</span>; <span class="comment">//æ¸…é™¤</span></span><br><span class="line">		<span class="comment">// é”™è¯¯å½¢å¼çš„æ•è·å°†éœ€è¦åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨å‡½æ•°æ¥å¤„ç†</span></span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure><ul><li><h3 id="10-å¼‚æ­¥è¿­ä»£-Asynchronous-Iteration"><a href="#10-å¼‚æ­¥è¿­ä»£-Asynchronous-Iteration" class="headerlink" title="10. å¼‚æ­¥è¿­ä»£ (Asynchronous Iteration)"></a>10. å¼‚æ­¥è¿­ä»£ (Asynchronous Iteration)</h3></li></ul><p>è¿™æ˜¯ä¸€ä¸ª*éå¸¸*æœ‰ç”¨çš„ç‰¹æ€§ã€‚åŸºæœ¬ä¸Šå®ƒå…è®¸æˆ‘ä»¬è½»æ¾åˆ›å»ºå¼‚æ­¥ä»£ç å¾ªç¯ï¼</p><p>è¿™ä¸ªç‰¹æ€§å¢åŠ äº†ä¸€ä¸ªæ–°çš„â€œfor-await-ofâ€å¾ªç¯ï¼Œå…è®¸æˆ‘ä»¬å¾ªç¯è°ƒç”¨è¿”å› Promiseï¼ˆæˆ– Promise æ•°ç»„ï¼‰çš„å¼‚æ­¥å‡½æ•°ã€‚å¾ˆé…·çš„ä¸€ç‚¹æ˜¯ï¼Œå¾ªç¯ä¼šç­‰å¾…æ¯ä¸ª Promise è¢« resolve æ‰è¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promises = [</span><br><span class="line">	<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(<span class="number">1</span>)),</span><br><span class="line">	<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(<span class="number">2</span>)),</span><br><span class="line">	<span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(<span class="number">3</span>)),</span><br><span class="line">]</span><br><span class="line"><span class="comment">// ä¹‹å‰</span></span><br><span class="line"><span class="comment">// for-ofä½¿ç”¨å¸¸è§„åŒæ­¥è¿­ä»£å™¨</span></span><br><span class="line"><span class="comment">// ä¸ç­‰å¾…Promise å»è§£å†³</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">const</span> obj <span class="keyword">of</span> promise) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(obj) <span class="comment">// è®°å½•3 æ¡Promiseå¯¹è±¡</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥å</span></span><br><span class="line"><span class="comment">// for-wait-ofä½¿ç”¨å¼‚æ­¥è¿­ä»£</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> obj <span class="keyword">of</span> promises) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(obj); <span class="comment">// 1,2, 3</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test1() <span class="comment">// promise, promise, promise</span></span><br><span class="line">test2() <span class="comment">// 1,2,3</span></span><br></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Šå°±æ˜¯è¿™äº›äº†ï¼</p></div><div></div><div></div><div><hr><ul class="post-copyright"><li class="post-copyright-authors"> <strong>æœ¬æ–‡ä½œè€…ï¼š</strong> <a href="https://github.com/sachieyuan">sachieyuan</a> <a href="https://github.com/SevenOutman">SevenOutman</a></li><li class="post-copyright-link"> <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="http://blog.rsuitejs.com/2018/04/11/es2016-17-18/" title="ECMAScript 2016, 2017, å’Œ2018ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹">http://blog.rsuitejs.com/2018/04/11/es2016-17-18/</a></li><li class="post-copyright-license"> <strong>ç‰ˆæƒå£°æ˜ï¼š</strong> æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/ECMAScript-2016/" rel="tag"><i class="fa fa-tag"></i> ECMAScript 2016</a><a href="/tags/ECMAScript-2017/" rel="tag"><i class="fa fa-tag"></i> ECMAScript 2017</a><a href="/tags/ECMAScript-2018/" rel="tag"><i class="fa fa-tag"></i> ECMAScript 2018</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/04/04/webkit-render/" rel="next" title="æµè§ˆå™¨æ¸²æŸ“å¼•æ“"><i class="fa fa-chevron-left"></i> æµè§ˆå™¨æ¸²æŸ“å¼•æ“</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/2018/04/19/webpack-mutiple-theme-solution/" rel="prev" title="webpack æ¢è‚¤åŠŸèƒ½å¤šä¸»é¢˜/é…è‰²æ ·å¼æ‰“åŒ…è§£å†³æ–¹æ¡ˆ">webpack æ¢è‚¤åŠŸèƒ½å¤šä¸»é¢˜/é…è‰²æ ·å¼æ‰“åŒ…è§£å†³æ–¹æ¡ˆ<i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="gitment"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview" data-target="site-overview"> ç«™ç‚¹æ¦‚è§ˆ</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/hypers_logo.png" alt="Hypers"><p class="site-author-name" itemprop="name">Hypers</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">24</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">2</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">45</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav><div class="links-of-author motion-element"></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ä»¥ä¸‹æ˜¯-ECMAScript-2016-2017-å’Œ-2018-ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹"><span class="nav-number">1.</span> <span class="nav-text">ä»¥ä¸‹æ˜¯ ECMAScript 2016, 2017, å’Œ 2018 ä¸­æ–°å¢åŠŸèƒ½çš„ç¤ºä¾‹</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ECMAScript-2016"><span class="nav-number">1.1.</span> <span class="nav-text">ECMAScript 2016</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Array-prototype-includes"><span class="nav-number">1.1.1.</span> <span class="nav-text">1. Array.prototype.includes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-å¹‚è¿ç®—ç¬¦"><span class="nav-number">1.1.2.</span> <span class="nav-text">2. å¹‚è¿ç®—ç¬¦</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ECMAScript-2017"><span class="nav-number">1.2.</span> <span class="nav-text">ECMAScript 2017</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Object-values"><span class="nav-number">1.2.1.</span> <span class="nav-text">1. Object.values()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Object-entries"><span class="nav-number">1.2.2.</span> <span class="nav-text">2. Object.entries()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-å­—ç¬¦ä¸²å¡«å……"><span class="nav-number">1.2.3.</span> <span class="nav-text">3. å­—ç¬¦ä¸²å¡«å……</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-padStart-ä¾‹å­"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">3.1 padStart ä¾‹å­</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-padEnd-ä¾‹å­"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">3.2 padEnd ä¾‹å­:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-âš ï¸-Emoji-å’Œå…¶ä»–åŒå­—èŠ‚å­—ç¬¦ä¸Šçš„-padStart-å’Œ-padEnd"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">3.3 âš ï¸ Emoji å’Œå…¶ä»–åŒå­—èŠ‚å­—ç¬¦ä¸Šçš„ padStart å’Œ padEnd</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Object-getOwnPropertyDescriptors"><span class="nav-number">1.2.4.</span> <span class="nav-text">4. Object.getOwnPropertyDescriptors</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#ä¹‹å‰â€¦"><span class="nav-number">1.2.4.0.0.1.</span> <span class="nav-text">ä¹‹å‰â€¦</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ä»¥åâ€¦"><span class="nav-number">1.2.4.0.0.2.</span> <span class="nav-text">ä»¥åâ€¦</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-åœ¨å‡½æ•°å‚æ•°ä¸­æ·»åŠ å°¾åé€—å·-trailing-commas"><span class="nav-number">1.2.5.</span> <span class="nav-text">5. åœ¨å‡½æ•°å‚æ•°ä¸­æ·»åŠ å°¾åé€—å·(trailing commas)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Async-Await"><span class="nav-number">1.2.6.</span> <span class="nav-text">6. Async/Await</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ª-Promise"><span class="nav-number">1.2.6.1.</span> <span class="nav-text">6.1 å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ª Promise</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-å¹¶è¡Œè°ƒç”¨-async-await"><span class="nav-number">1.2.6.2.</span> <span class="nav-text">6.2 å¹¶è¡Œè°ƒç”¨ async/await</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3-async-await-å‡½æ•°æ—¶çš„é”™è¯¯å¤„ç†"><span class="nav-number">1.2.6.3.</span> <span class="nav-text">6.3 async/await å‡½æ•°æ—¶çš„é”™è¯¯å¤„ç†</span></a></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#ECMAScript-2018"><span class="nav-number">1.3.</span> <span class="nav-text">ECMAScript 2018</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-å…±äº«å†…å­˜å’ŒåŸå­æ“ä½œ-Shared-memory-and-atomics"><span class="nav-number">1.3.1.</span> <span class="nav-text">1. å…±äº«å†…å­˜å’ŒåŸå­æ“ä½œ (Shared memory and atomics)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ç§»é™¤äº†å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶"><span class="nav-number">1.3.2.</span> <span class="nav-text">2. ç§»é™¤äº†å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-æ­£åˆ™è¡¨è¾¾å¼çš„â€œ-â€æ ‡è¯†"><span class="nav-number">1.3.3.</span> <span class="nav-text">3. æ­£åˆ™è¡¨è¾¾å¼çš„â€œ.â€æ ‡è¯†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-æ­£åˆ™è¡¨è¾¾å¼å‘½åç»„æ•è·-RegExp-Named-Group-Captures-ğŸ”¥"><span class="nav-number">1.3.4.</span> <span class="nav-text">4. æ­£åˆ™è¡¨è¾¾å¼å‘½åç»„æ•è·(RegExp Named Group Captures ğŸ”¥)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-åŸºæœ¬å‘½åç»„çš„ä¾‹å­"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">4.1 åŸºæœ¬å‘½åç»„çš„ä¾‹å­</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-åœ¨æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«å†…ä½¿ç”¨å‘½åç»„"><span class="nav-number">1.3.4.2.</span> <span class="nav-text">4.2 åœ¨æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«å†…ä½¿ç”¨å‘½åç»„</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-åœ¨-String-prototype-replace-ä¸­ä½¿ç”¨å‘½åç»„"><span class="nav-number">1.3.4.3.</span> <span class="nav-text">4.3 åœ¨ String.prototype.replace ä¸­ä½¿ç”¨å‘½åç»„</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-å¯¹è±¡çš„å…¶ä½™å±æ€§-Rest-properties-for-Objects"><span class="nav-number">1.3.5.</span> <span class="nav-text">5. å¯¹è±¡çš„å…¶ä½™å±æ€§(Rest properties for Objects)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-ä½ å¯ä»¥ä½¿ç”¨-rest-æ¥å¸®åŠ©åªæå–ä½ æƒ³è¦çš„å±æ€§"><span class="nav-number">1.3.5.1.</span> <span class="nav-text">5.1 ä½ å¯ä»¥ä½¿ç”¨ rest æ¥å¸®åŠ©åªæå–ä½ æƒ³è¦çš„å±æ€§</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-æ›´å¥½çš„æ˜¯ï¼Œä½ å¯ä»¥åˆ é™¤ä¸éœ€è¦çš„ï¼ğŸ”¥ğŸ”¥"><span class="nav-number">1.3.5.2.</span> <span class="nav-text">5.2 æ›´å¥½çš„æ˜¯ï¼Œä½ å¯ä»¥åˆ é™¤ä¸éœ€è¦çš„ï¼ğŸ”¥ğŸ”¥</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-å±•å¼€å¯¹è±¡å±æ€§-Spread-properties-for-Objects"><span class="nav-number">1.3.6.</span> <span class="nav-text">6. å±•å¼€å¯¹è±¡å±æ€§ (Spread properties for Objects)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-æ­£åˆ™è¡¨è¾¾å¼çš„åè¡Œæ–­è¨€ï¼ˆé›¶å®½åå‘æ–­è¨€ï¼‰"><span class="nav-number">1.3.7.</span> <span class="nav-text">7. æ­£åˆ™è¡¨è¾¾å¼çš„åè¡Œæ–­è¨€ï¼ˆé›¶å®½åå‘æ–­è¨€ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-æ­£åˆ™è¡¨è¾¾å¼-Unicode-å±æ€§è½¬ä¹‰ï¼ˆRegExp-Unicode-Property-Escapesï¼‰"><span class="nav-number">1.3.8.</span> <span class="nav-text">8. æ­£åˆ™è¡¨è¾¾å¼ Unicode å±æ€§è½¬ä¹‰ï¼ˆRegExp Unicode Property Escapesï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-Promise-prototype-finally"><span class="nav-number">1.3.9.</span> <span class="nav-text">9. Promise.prototype.finally()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-å¼‚æ­¥è¿­ä»£-Asynchronous-Iteration"><span class="nav-number">1.3.10.</span> <span class="nav-text">10. å¼‚æ­¥è¿­ä»£ (Asynchronous Iteration)</span></a></li></ol></li></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2019</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Hypers</span> <span class="post-count">- å…¨ç«™å…±56.0kå­—</span></div><div class="powered-by"> ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div><div class="theme-info"> ä¸»é¢˜ - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script></body></html>